const n=`{% block sw_product_detail_content_tabs_additional %} {% parent %} {% block sw_product_detail_content_tabs_price_history %} <sw-tabs-item :route="{ name: 'price.history', params: { id: $route.params.id } }" title="Preisentwicklung"> Preisentwicklung </sw-tabs-item> {% endblock %} {% endblock %}`;Shopware.Component.override("sw-product-detail",{template:n});const c=`<div> <sw-card title="Preisentwicklung"> <div class="custom-chart-page"> <sw-chart :type="'line'" :series="[ { name: 'Preis', data:products }, ]" :options="{ title: { text: 'Verkaufspreis' }, xaxis: { type: 'datetime', min: minimum, {#max: 1559952000000#} }, yaxis: { min:0, tickAmount:3, labels:{ formatter: (value) => { return value } } } }" :fillEmptyValues="day" :sort="true"> </sw-chart> <sw-chart :type="'line'" :series="[ { name: 'Preis', data:ekproducts }, ]" :options="{ title: { text: 'Einkaufspreis' }, xaxis: { type: 'datetime', min: ekminimum, {#max: 1559952000000#} }, yaxis: { min:0, tickAmount:3, labels:{ formatter: (value) => { return value } } } }" :fillEmptyValues="day" :sort="true"> </sw-chart> </div> </sw-card> </div>`,{Criteria:o}=Shopware.Data;Shopware.Component.register("price-history",{template:c,inject:["repositoryFactory"],data:function(){return{minimum:void 0,products:[],ekminimum:void 0,ekproducts:[],result:void 0,repository:void 0}},computed:{routeId(){return this.$route.params.id},priceHistoryRepository(){return this.repositoryFactory.create("price_history")},purchasePriceHistoryRepository(){return this.repositoryFactory.create("purchase_price_history")}},metaInfo(){return{title:"Preisentwicklung"}},created(){const i=new o;i.addFilter(o.equals("productId",this.routeId)),i.addSorting(o.sort("changeDate","ASC"));let e=0;this.priceHistoryRepository.search(i,Shopware.Context.api).then(t=>{t.forEach(r=>{e===0&&(this.minimum=new Date(r.createdAt).getTime()),e=e+1;let s={x:new Date(r.createdAt).getTime(),y:r.newPrice[0].gross};this.products.push(s)}),this.result=t});let a=0;this.purchasePriceHistoryRepository.search(i,Shopware.Context.api).then(t=>{console.error(t),t.forEach(r=>{a===0&&(this.ekminimum=new Date(r.createdAt).getTime()),a=a+1;let s={x:new Date(r.createdAt).getTime(),y:r.newPrice[0].gross};this.ekproducts.push(s)})})},methods:{}});Shopware.Module.register("af-price-watcher-tab",{routeMiddleware(i,e){const a="price.history";e.name==="sw.product.detail"&&e.children.every(t=>t.name!==a)&&e.children.push({name:a,path:"/sw/product/detail/:id/pricehistory",component:"price-history",meta:{parentPath:"sw.product.index"}}),i(e)}});
//# sourceMappingURL=price-history-_MEUS0l3.js.map
