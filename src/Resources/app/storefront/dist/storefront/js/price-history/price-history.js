(()=>{"use strict";let{PluginBaseClass:t}=window;window.PluginManager.register("PriceHistoryPlugin",class extends t{init(){console.error("History Plugin loaded"),this.button=this.el.children["ajax-button"],this.textdiv=this.el.children["ajax-display"],this.id=this.el.children["ajax-button"].value,this._registerEvents()}_registerEvents(){this.button.onclick=this._fetch.bind(this)}async _fetch(){let t=await fetch("/price_history/price_change/"+this.id);console.error(await t.json())}_setContent(t){console.log(t);let i=JSON.parse(t),e="<ul>";Object.entries(i).forEach(t=>{let[i,s]=t;e+="<li>"+i+": "+s.old+" to "+s.new+"</li>"}),e+="</ul>",this.textdiv.innerHTML=e}},"[data-price-history-plugin]")})();